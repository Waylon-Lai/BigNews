<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>大事件-后台首页</title>
  <link rel="stylesheet" href="./libs/bootstrap/css/bootstrap.min.css" />
  <link rel="stylesheet" href="css/reset.css" />
  <link rel="stylesheet" href="css/iconfont.css" />
  <link rel="stylesheet" href="css/main.css" />
  <script src="./libs/jquery-1.12.4.min.js"></script>
  <!-- 导入bootstrap的js文件 -->
  <script src="./libs/bootstrap/js/bootstrap.min.js"></script>
</head>

<body>
  <div class="sider">
    <a href="#" class="logo"><img src="images/logo02.png" alt="logo" /></a>
    <div class="user_info">
      <img src="images/2.jpg" alt="person" />
      <span>欢迎&nbsp;&nbsp;<i style="font-style: normal;">默认名字</i></span>
      <b>管理员</b>
    </div>
    <!-- 左侧导航栏 -->
    <div class="menu">
      <!-- 首页 -->
      <div class="level01 active">
        <a href="./main_count.html" target="main_frame"><i
            class="iconfont icon-yidiandiantubiao04"></i><span>首页</span></a>
      </div>
      <!-- 文章管理            -->
      <div class="level01">
        <!-- 一开始显示二级菜单 要默认打开的页面在 href 属性中设置该页面的路径 -->
        <!-- <a href="./article_list.html" target="main_frame" -->
        <a href="#"><i class="iconfont icon-icon-article"></i><span>文章管理</span><b
            class="iconfont icon-arrowdownl"></b></a>
      </div>
      <ul class="level02">
        <li>
          <!-- 文章列表 -->
          <a href="./article_list.html" target="main_frame"><i
              class="iconfont icon-previewright"></i><span>文章列表</span></a>
        </li>
        <li>
          <!-- 发表文章 -->
          <a href="./article_release.html" target="main_frame"><i
              class="iconfont icon-previewright"></i><span>发表文章</span></a>
        </li>
        <li>
          <!-- 文章类别 -->
          <a href="./article_category.html" target="main_frame"><i
              class="iconfont icon-previewright"></i><span>文章类别管理</span></a>
        </li>
      </ul>
      <!-- 评论管理 -->
      <div class="level01">
        <a href="./comment_list.html" target="main_frame"><i class="iconfont icon-comment"></i><span>评论管理</span></a>
      </div>
      <!-- 个人中心 -->
      <div class="level01" id="user">
        <a href="./user.html" target="main_frame"><i class="iconfont icon-user"></i><span>个人中心</span></a>
      </div>
    </div>
    <!-- 顶部栏 -->
    <div class="header_bar">
      <div class="user_center_link">
        <a href="./user.html" target="main_frame">个人中心</a>
        <img src="images/2.jpg" alt="person" />
        <a href="javascript:void(0)" class="logout"><i class="iconfont icon-tuichu"></i> 退出</a>
      </div>
    </div>
    <!-- 右侧主体内容 -->
    <div class="main" id="main_body">
      <!-- 一进入主页要默认打开的页面在 src 属性中设置该页面的路径 -->
      <iframe name="main_frame" src="./main_count.html" frameborder="0" style="width:100%;height:100%"></iframe>
    </div>
  </div>
  <!-- bootstrap的模态框 -->
  <div class="modal fade" tabindex="-1" role="dialog" id="myModal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
              aria-hidden="true">&times;</span></button>
          <h4 class="modal-title">温馨提示：</h4>
        </div>
        <div class="modal-body">
          <p>您确定要登出吗？&hellip;</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
          <button type="button" class="btn btn-primary" id="btn-sure">确定</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

  <!-- 引入封装的HTTP文件 -->
  <script src="./libs/http.js"></script>
  <script>
    $(function () {
      // 一进来加载页面显示登录用户的信息
      $.ajax({
        type: "get",
        url: BigNew.user_info,
        // 提交请求头，读取本地保存的‘令牌’token
        // headers:{
        //     'Authorization':localStorage.getItem('token')
        // },
        success: function (backData) {
          if (backData.code == 200) {
            // 将用户信息加载到页面对应位置
            $(".user_info span i").text(backData.data.nickname);
            $(".user_info img").attr("src", backData.data.userPic);
            $(".user_center_link img").attr("src", backData.data.userPic);
          }
        },
      });

      // 登出功能
      $(".logout").on("click", function () {
        $('#myModal').modal('show');
      });
      $('#btn-sure').on('click', function () {
        localStorage.removeItem("token");
        window.location.href = "./login.html";
      })

      // 左侧一级菜单点击事件
      $('div.level01').on('click', function () {
        $(this).addClass('active').siblings().removeClass('active');
        // 判断是不是一级菜单“文章管理”
        if ($(this).index() == 1) {
          // 显示就隐藏 隐藏就显示二级菜单 
          $('ul.level02').slideToggle();
          // 小箭头做对应旋转动画
          $(this).find('b').toggleClass('rotate0');
          // 点击一级菜单“文章管理” 默认显示二级菜单“文章列表”
          // 第一种方式
          // 1.在dom结构中设置a跳转的超链接  -->第37行
          // 2.触发对应父亲li的点击事件
          // $('ul.level02>li').eq(0).trigger('click');
          // 第二种方式
          // a标签的dom元素触发的点击事件，不仅会执行点击函数，还会触发超链接的跳转
          // 然后通过事件冒泡触发其父亲li的点击事件
          $('ul.level02>li:eq(0)>a')[0].click();
          // $('ul.level02>li>a')[0].click();
        }
      });
      // 左侧二级菜单点击事件
      $('ul.level02>li').on('click', function () {
        $(this).addClass('active').siblings().removeClass('active');
      });



    });
  </script>
</body>

</html>